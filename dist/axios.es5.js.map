{"version":3,"file":"axios.es5.js","sources":["../src/helpers/util.ts","../src/helpers/headers.ts","../src/helpers/error.ts","../src/helpers/url.ts","../src/helpers/cookie.ts","../src/core/xhr.ts","../src/core/transform.ts","../src/core/dispatchRequest.ts","../src/core/InterceptorManager.ts","../src/core/mergeConfig.ts","../src/core/Axios.ts","../src/helpers/data.ts","../src/defaults.ts","../src/cancel/Cancel.ts","../src/cancel/CancelToken.ts","../src/axios.ts"],"sourcesContent":["const toString = Object.prototype.toString\n\nexport function isDate(val: any): val is Date {\n  return Object.prototype.toString.call(val) === '[object Date]'\n}\n\nexport function isObject(val: any): val is Object {\n  return val !== null && typeof val === 'object'\n}\n\nexport function isPlainObject(val: any): val is Object {\n  return toString.call(val) === '[object Object]'\n}\n\nexport function isFormData(val: any): val is FormData {\n  return typeof val !== 'undefined' && val instanceof FormData\n}\n\nexport function extend<T, U>(to: T, from: U): T & U {\n  for (const key in from) {\n    ;(to as T & U)[key] = from[key] as any\n  }\n  return to as T & U\n}\n\nexport function deepMerge(...objs: any[]): any {\n  const result = Object.create(null)\n\n  objs.forEach(obj => {\n    if (obj) {\n      Object.keys(obj).forEach(key => {\n        const val = obj[key]\n        if (isPlainObject(val)) {\n          if (isPlainObject(result[key])) {\n            result[key] = deepMerge(result[key], val)\n          } else {\n            result[key] = deepMerge(val)\n          }\n        } else {\n          result[key] = val\n        }\n      })\n    }\n  })\n\n  return result\n}\n\nexport function isURLSearchParams(val: any): val is URLSearchParams {\n  return typeof val !== 'undefined' && val instanceof URLSearchParams\n}\n","import { Method } from '../types'\nimport { isPlainObject, deepMerge } from './util'\n\nfunction normalizeHeaderName(headers: any, normalizeName: string): void {\n  if (!headers) return\n  Object.keys(headers).forEach(name => {\n    if (name !== normalizeName && name.toLocaleUpperCase() === normalizeName.toLocaleUpperCase()) {\n      headers[normalizeName] = headers[name]\n      delete headers[name]\n    }\n  })\n}\n\nexport function processHeaders(headers: any, data: any): any {\n  normalizeHeaderName(headers, 'Content-Type')\n\n  if (isPlainObject(data)) {\n    if (headers && !headers['Content-Type']) {\n      headers['Content-Type'] = 'application/json;charset=utf-8'\n    }\n  }\n\n  return headers\n}\n\nexport function parseHeaders(headers: string): any {\n  let parsed = Object.create(null)\n  if (!headers) {\n    return parsed\n  }\n\n  headers.split('\\r\\n').forEach(line => {\n    // 字符串可能存在多个 \":\" 的情况\n    let [key, ...vals] = line.split(':')\n    key = key.trim().toLocaleLowerCase()\n    if (!key) return\n    const val = vals.join(':').trim()\n    parsed[key] = val\n  })\n  return parsed\n}\n\nexport function flattenHeaders(headers: any, method: Method): any {\n  if (!headers) return headers\n\n  headers = deepMerge(headers.common, headers[method], headers)\n\n  const methodsToDelete = ['delete', 'get', 'head', 'options', 'post', 'put', 'patch', 'common']\n\n  methodsToDelete.forEach(method => {\n    delete headers[method]\n  })\n\n  return headers\n}\n","import { AxiosRequestConfig, AxiosResponse } from \"../types\";\r\n\r\nexport class AxiosError extends Error {\r\n  isAxiosError: boolean\r\n  config: AxiosRequestConfig\r\n  code?: string | null | number\r\n  request?: any\r\n  response?: AxiosResponse\r\n\r\n  constructor(\r\n    message: string,\r\n    config: AxiosRequestConfig,\r\n    code: string | null | number,\r\n    request?: any,\r\n    response?: AxiosResponse\r\n  ) {\r\n    super(message)\r\n    this.config = config\r\n    this.code = code\r\n    this.request = request\r\n    this.response = response\r\n    this.isAxiosError = true\r\n\r\n    Object.setPrototypeOf(this, AxiosError.prototype)\r\n  }\r\n}\r\n\r\nexport function createError(\r\n  message: string,\r\n  config: AxiosRequestConfig,\r\n  code: string | null | number,\r\n  request?: any,\r\n  response?: AxiosResponse\r\n) {\r\n  const error = new AxiosError(message, config, code, request, response)\r\n  return error\r\n}","import { isDate, isPlainObject, isURLSearchParams } from './util'\n\ninterface URLOrigin {\n  protocol: string\n  host: string\n}\n\nfunction encode(val: string): string {\n  return encodeURIComponent(val)\n    .replace(/%40/g, '@')\n    .replace(/%3A/gi, ':')\n    .replace(/%24/g, '$')\n    .replace(/%2C/gi, ',')\n    .replace(/%20/g, '+') // 约定将 空格 号转为 +\n    .replace(/%5B/gi, '[')\n    .replace(/%5D/gi, ']')\n}\n\nexport function buildURL(\n  url: string,\n  params?: any,\n  paramsSerializer?: (params: any) => string\n): string {\n  if (!params) {\n    return url\n  }\n\n  let serializedParams\n\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params)\n  } else if (isURLSearchParams(params)) {\n    serializedParams = params.toString()\n  } else {\n    const parts: string[] = []\n\n    Object.keys(params).forEach(key => {\n      const val = params[key]\n      if (val === null || typeof val === 'undefined') {\n        return\n      }\n      let values = []\n      if (Array.isArray(val)) {\n        values = val\n        key += '[]'\n      } else {\n        values = [val]\n      }\n      values.forEach(val => {\n        if (isDate(val)) {\n          val = val.toISOString()\n        } else if (isPlainObject(val)) {\n          val = JSON.stringify(val)\n        }\n        parts.push(`${encode(key)}=${encode(val)}`)\n      })\n    })\n\n    serializedParams = parts.join('&')\n  }\n\n  if (serializedParams) {\n    const markIndex = url.indexOf('#')\n    if (markIndex !== -1) {\n      url = url.slice(0, markIndex)\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams\n  }\n\n  return url\n}\n\nexport function isAbsoluteURL(url: string): boolean {\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url)\n}\n\nexport function combineURL(baseURL: string, relativeURL?: string): string {\n  return relativeURL ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '') : baseURL\n}\n\nexport function isURLSameOrigin(requestURL: string): boolean {\n  const parsedOrigin = resolveURL(requestURL)\n  return (\n    parsedOrigin.protocol === currentOrigin.protocol && parsedOrigin.host === currentOrigin.host\n  )\n}\n\nconst urlParsingNode = document.createElement('a')\nconst currentOrigin = resolveURL(window.location.href)\n\nfunction resolveURL(url: string): URLOrigin {\n  // 通过创建一个 <a> 标签并设置 href 属性可以快捷的拿到 protocol 和 host\n  urlParsingNode.setAttribute('href', url)\n  const { protocol, host } = urlParsingNode\n  return {\n    protocol,\n    host\n  }\n}\n","// export const getCookie = (name: any): any => {\n//   //var res = document.cookie.match(/\\bcsrf_token=([^;]*)\\b/)\n//   var res = document.cookie.match('\\\\b' + name + '=([^;]*)\\\\b');\n//   return res ? res[1] : undefined;\n// }\n\nconst cookie = {\n  read(name: string): string | null {\n    const match = document.cookie.match(new RegExp(`(^|;\\\\s*)(${name})=([^;]*)`))\n    return match ? decodeURIComponent(match[3]) : null\n  }\n}\n\nexport default cookie\n","import { AxiosRequestConfig, AxiosPromise, AxiosResponse } from '../types'\nimport { parseHeaders } from '../helpers/headers'\nimport { createError } from '../helpers/error'\nimport { isURLSameOrigin } from '../helpers/url'\nimport cookie from '../helpers/cookie'\nimport { isFormData } from '../helpers/util'\n\nexport default function xhr(config: AxiosRequestConfig): AxiosPromise {\n  return new Promise((resolve, reject) => {\n    const {\n      data = null,\n      url,\n      method,\n      headers = {},\n      responseType,\n      timeout,\n      cancelToken,\n      withCredentials,\n      xsrfCookieName,\n      xsrfHeaderName,\n      onDownloadProgress,\n      onUploadProgress,\n      auth,\n      validateStatus\n    } = config\n\n    const request = new XMLHttpRequest()\n\n    // 第三个参数为 async 是否是异步请求\n    // 这里可以保证运行时 url 是有值的\n    request.open(method!.toUpperCase(), url!, true)\n\n    configureRequest()\n    addEvents()\n    processHeaders()\n    processCancel()\n\n    request.send(data)\n\n    function configureRequest(): void {\n      if (responseType) {\n        request.responseType = responseType\n      }\n\n      if (timeout) {\n        request.timeout = timeout\n      }\n\n      if (withCredentials) {\n        request.withCredentials = withCredentials\n      }\n    }\n\n    function addEvents(): void {\n      request.onreadystatechange = () => {\n        if (request.readyState !== 4) {\n          return\n        }\n        if (request.status === 0) {\n          return\n        }\n        const responseHeaders = parseHeaders(request.getAllResponseHeaders())\n\n        // 根据传入的 responseType 来决定返回的数据\n        const responseData =\n          responseType && responseType !== 'text' ? request.response : request.responseText\n\n        const response: AxiosResponse = {\n          data: responseData,\n          status: request.status,\n          statusText: request.statusText,\n          headers: responseHeaders,\n          config,\n          request\n        }\n\n        handleResponse(response)\n      }\n\n      request.onerror = () => {\n        reject(createError(`Network Error`, config, null, request))\n      }\n\n      request.ontimeout = () => {\n        reject(createError(`Timeout of ${timeout} ms exceeded`, config, 'ECONNABORTED', request))\n      }\n\n      if (onDownloadProgress) {\n        request.onprogress = onDownloadProgress\n      }\n\n      if (onUploadProgress) {\n        request.upload.onprogress = onUploadProgress\n      }\n    }\n\n    function processHeaders(): void {\n      /**\n       * 如果请求是个 FormData 类型，则删除 headers['Content-Type']\n       * 让浏览器自动为请求带上合适的 Content-Type\n       */\n      if (isFormData(data)) {\n        delete headers['Content-Type']\n      }\n\n      /**\n       * 跨站请求伪造 xsrf 防御\n       * 当请求开启了 withCredentials 或者是同源请求时\n       * 如果存在 xsrfCookieName 则为请求 headers 带上它的值\n       */\n      if ((withCredentials || isURLSameOrigin(url!)) && xsrfCookieName) {\n        const xsrfValue = cookie.read(xsrfCookieName)\n        if (xsrfValue && xsrfHeaderName) {\n          headers[xsrfHeaderName] = xsrfValue\n        }\n      }\n\n      /**\n       * kim-stamp\n       * btoa() 方法用于创建一个 base-64 编码的字符串。\n       * 该方法使用 \"A-Z\", \"a-z\", \"0-9\", \"+\", \"/\" 和 \"=\" 字符来编码字符串。\n       */\n      if (auth) {\n        headers['Authorization'] = `Basic ${btoa(`${auth.username} : ${auth.password}`)}`\n      }\n\n      Object.keys(headers).forEach(name => {\n        // 如果 data 为 null headers 的 content-type 属性没有意义\n        if (data === null && name.toLowerCase() === 'content-type') {\n          delete headers[name]\n        } else {\n          request.setRequestHeader(name, headers[name])\n        }\n      })\n    }\n\n    function processCancel(): void {\n      if (cancelToken) {\n        cancelToken.promise\n          .then(reason => {\n            request.abort()\n            reject(reason)\n          })\n          .catch(\n            /* istanbul ignore next */\n            () => {\n              // do nothing\n            }\n          )\n      }\n    }\n\n    function handleResponse(response: AxiosResponse): void {\n      const { status } = response\n      if (!validateStatus || validateStatus(status)) {\n        resolve(response)\n      } else {\n        reject(\n          createError(`Request failed with status code ${status}`, config, null, request, response)\n        )\n      }\n    }\n  })\n}\n","import { AxiosTransformer } from \"../types\";\r\n\r\nexport function transform(data: any, headers: any, fns?: AxiosTransformer | AxiosTransformer[]): any{\r\n  if (!fns) return data\r\n\r\n  if (!Array.isArray(fns)) {\r\n    fns = [fns]\r\n  }\r\n\r\n  fns.forEach(fn => {\r\n    data = fn(data, headers)\r\n  })\r\n\r\n  return data\r\n}","import { AxiosRequestConfig, AxiosPromise, AxiosResponse } from '../types'\nimport xhr from './xhr'\nimport { buildURL, isAbsoluteURL, combineURL } from '../helpers/url'\nimport { flattenHeaders } from '../helpers/headers'\nimport { transform } from './transform'\n\nexport default function dispatchRequest(config: AxiosRequestConfig): AxiosPromise {\n  throwIfCancellationRequested(config)\n  precessConfig(config)\n  return xhr(config).then(\n    res => {\n      return transformResponseData(res)\n    },\n    e => {\n      if (e && e.response) {\n        e.response = transformResponseData(e.response)\n      }\n      return Promise.reject(e)\n    }\n  )\n}\n\nfunction precessConfig(config: AxiosRequestConfig): void {\n  config.url = transformURL(config)\n  config.data = transform(config.data, config.headers, config.transformRequest)\n\n  // 这里 config.method 类型断言，可以保证运行时有值\n  config.headers = flattenHeaders(config.headers, config.method!)\n}\n\nexport function transformURL(config: AxiosRequestConfig): string {\n  const { params, paramsSerializer, baseURL } = config\n  let { url } = config\n  if (baseURL && !isAbsoluteURL(url!)) {\n    url = combineURL(baseURL, url)\n  }\n  // 这里可以保证运行时 url 是有值的\n  return buildURL(url!, params, paramsSerializer)\n}\n\nfunction transformResponseData(res: AxiosResponse): AxiosResponse {\n  res.data = transform(res.data, res.headers, res.config.transformResponse)\n  return res\n}\n\n// 请求判断此请求是否已经被取消了，如果被取消了，再发送此请求是没有意义的\nfunction throwIfCancellationRequested(config: AxiosRequestConfig): void {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested()\n  }\n}\n","import { ResolvedFn, RejectedFn } from \"../types\";\r\n\r\n\r\ninterface Interceptor<T> {\r\n  resolved: ResolvedFn<T>\r\n  rejected?: RejectedFn\r\n}\r\n\r\nexport default class InterceptorManager<T> {\r\n  private interceptors: Array<Interceptor<T> | null>\r\n\r\n  constructor() {\r\n    this.interceptors = []\r\n  }\r\n\r\n  use(resolved: ResolvedFn<T>, rejected: RejectedFn): number {\r\n    this.interceptors.push({\r\n      resolved,\r\n      rejected\r\n    })\r\n    return this.interceptors.length - 1\r\n  }\r\n\r\n  forEach(fn: (interceptor: Interceptor<T>) => void): void {\r\n    this.interceptors.forEach(interceptor => {\r\n      if (interceptor !== null) {\r\n        fn(interceptor)\r\n      }\r\n    })\r\n  }\r\n\r\n  eject(id: number) {\r\n    if (this.interceptors[id]) {\r\n      this.interceptors[id] = null\r\n    }\r\n  }\r\n}","import { AxiosRequestConfig } from '../types'\nimport { deepMerge, isPlainObject } from '../helpers/util'\n\nexport default function mergeConfig(\n  config1: AxiosRequestConfig,\n  config2?: AxiosRequestConfig\n): AxiosRequestConfig {\n  if (!config2) {\n    config2 = {}\n  }\n\n  const config = Object.create(null)\n\n  for (let key in config2) {\n    mergeField(key)\n  }\n\n  for (let key in config1) {\n    if (!config2[key]) {\n      mergeField(key)\n    }\n  }\n\n  function mergeField(key: string): void {\n    const stratFn = bufferdict[key] || defaultStrat\n    config[key] = stratFn(config1[key], config2![key])\n  }\n\n  return config\n}\n\nfunction defaultStrat(val1: any, val2: any): any {\n  return typeof val2 !== 'undefined' ? val2 : val1\n}\n\nconst bufferdict: { [name: string]: (val: any, val2: any) => void } = Object.create(null)\nconst stratKeysFromVal2 = ['url', 'params', 'data']\nstratKeysFromVal2.forEach(key => {\n  bufferdict[key] = function stratKeysFromVal2Fn(val1: any, val2: any): any {\n    if (typeof val2 !== 'undefined') return val2\n  }\n})\n\nconst stratKeysDeepMerge = ['headers', 'auth']\nstratKeysDeepMerge.forEach(key => {\n  bufferdict[key] = function stratKeysDeepMergeFn(val1: any, val2: any): any {\n    if (isPlainObject(val2)) {\n      return deepMerge(val1, val2)\n    } else if (typeof val2 !== 'undefined') {\n      return val2\n    } else if (isPlainObject(val1)) {\n      return deepMerge(val1)\n    } else {\n      return val1\n    }\n  }\n})\n","import {\n  AxiosRequestConfig,\n  AxiosPromise,\n  Method,\n  AxiosResponse,\n  ResolvedFn,\n  RejectedFn\n} from '../types'\nimport dispatchRequest, { transformURL } from './dispatchRequest'\nimport InterceptorManager from './InterceptorManager'\nimport mergeConfig from './mergeConfig'\n\ninterface Interceptors {\n  request: InterceptorManager<AxiosRequestConfig>\n  response: InterceptorManager<AxiosResponse>\n}\n\ninterface PromiseChain<T> {\n  resolved: ResolvedFn<T> | ((config: AxiosRequestConfig) => AxiosPromise)\n  rejected?: RejectedFn\n}\n\nexport default class Axios {\n  defaults: AxiosRequestConfig\n  interceptors: Interceptors\n\n  constructor(initConfig: AxiosRequestConfig) {\n    this.defaults = initConfig\n    this.interceptors = {\n      request: new InterceptorManager<AxiosRequestConfig>(),\n      response: new InterceptorManager<AxiosResponse>()\n    }\n  }\n\n  request(url: any, config?: any): AxiosPromise {\n    // 实现函数重载，兼容传与不传 config\n    if (typeof url === 'string') {\n      if (!config) {\n        config = {}\n      }\n      config.url = url\n    } else {\n      config = url\n    }\n\n    config = mergeConfig(this.defaults, config)\n    config.method = config.method.toLocaleLowerCase()\n\n    const chain: PromiseChain<any>[] = [\n      {\n        resolved: dispatchRequest,\n        rejected: undefined\n      }\n    ]\n\n    this.interceptors.request.forEach(interceptor => {\n      // request 拦截器先添加的后执行\n      chain.unshift(interceptor)\n    })\n\n    this.interceptors.response.forEach(interceptor => {\n      // response 拦截器先添加的先执行\n      chain.push(interceptor)\n    })\n\n    let promise = Promise.resolve(config)\n\n    while (chain.length) {\n      // chain.shift() 可能是 undefined 这里需要断言\n      const { resolved, rejected } = chain.shift()!\n      promise = promise.then(resolved, rejected)\n    }\n\n    // return dispatchRequest(config)\n    return promise\n  }\n\n  get(url: string, config: AxiosRequestConfig): AxiosPromise {\n    return this._requestMethodWhithoutData('get', url, config)\n  }\n\n  delete(url: string, config: AxiosRequestConfig): AxiosPromise {\n    return this._requestMethodWhithoutData('delete', url, config)\n  }\n\n  head(url: string, config: AxiosRequestConfig): AxiosPromise {\n    return this._requestMethodWhithoutData('head', url, config)\n  }\n\n  options(url: string, config: AxiosRequestConfig): AxiosPromise {\n    return this._requestMethodWhithoutData('options', url, config)\n  }\n\n  post(url: string, data?: any, config?: AxiosRequestConfig): AxiosPromise {\n    return this._requestMethodWhithData('post', url, data, config)\n  }\n\n  put(url: string, data?: any, config?: AxiosRequestConfig): AxiosPromise {\n    return this._requestMethodWhithData('put', url, data, config)\n  }\n\n  patch(url: string, data?: any, config?: AxiosRequestConfig): AxiosPromise {\n    return this._requestMethodWhithData('patch', url, data, config)\n  }\n\n  getUri(config?: AxiosRequestConfig): string {\n    config = mergeConfig(this.defaults, config)\n    return transformURL(config)\n  }\n\n  _requestMethodWhithoutData(method: Method, url: string, config?: AxiosRequestConfig) {\n    return this.request(\n      Object.assign(config || {}, {\n        method,\n        url\n      })\n    )\n  }\n\n  _requestMethodWhithData(method: Method, url: string, data?: any, config?: AxiosRequestConfig) {\n    return this.request(\n      Object.assign(config || {}, {\n        method,\n        url,\n        data\n      })\n    )\n  }\n}\n","import { isPlainObject } from './util'\r\n\r\nexport function transformRequest(data: any): any {\r\n  if (isPlainObject(data)) {\r\n    return JSON.stringify(data)\r\n  }\r\n  return data\r\n}\r\n\r\nexport function transformResponse(data: any): any {\r\n  if (typeof data === 'string') {\r\n    try {\r\n      data = JSON.parse(data)\r\n    } catch (err) {\r\n      // do nothing\r\n    }\r\n  }\r\n  return data\r\n}","import { AxiosRequestConfig } from \"./types\";\r\nimport { processHeaders } from \"./helpers/headers\";\r\nimport { transformRequest, transformResponse } from \"./helpers/data\";\r\n\r\nconst defaults: AxiosRequestConfig = {\r\n  method: 'get',\r\n  timeout: 0,\r\n  headers: {\r\n    common: {\r\n      Accept: 'application/json, text/plain, */*'\r\n    }\r\n  },\r\n  xsrfCookieName: 'XSRF-TOKEN',\r\n  xsrfHeaderName: 'XSRF-HEADER-NAME',\r\n  \r\n  transformRequest: [\r\n    function(data: any, headers: any): any {\r\n      processHeaders(headers, data)\r\n      return transformRequest(data)\r\n    }\r\n  ],\r\n  transformResponse: [\r\n    function(data: any): any {\r\n      return transformResponse(data)\r\n    }\r\n  ],\r\n  validateStatus(status: number): boolean {\r\n    return status >= 200 && status < 300\r\n  }\r\n}\r\n\r\nconst methodsNoData = ['delete', 'get', 'head', 'options']\r\n\r\nmethodsNoData.forEach(method => {\r\n  defaults.headers[method] = {}\r\n})\r\n\r\nconst methodWithData = ['post', 'put', 'patch']\r\n\r\nmethodWithData.forEach(method => {\r\n  defaults.headers[method] = {\r\n    'Content-Type': 'application/x-www-form-urlencoded'\r\n  }\r\n})\r\n\r\nexport default defaults","\r\nexport default class Cancel {\r\n  message?: string\r\n\r\n  constructor(message?: string) {\r\n    this.message = message\r\n  }\r\n}\r\n\r\nexport function isCancel(value: any): boolean {\r\n  return value instanceof Cancel\r\n}","import { CancelExecutor, CancelTokenSource, Canceler } from '../types'\nimport Cancel from './Cancel'\n\ninterface ResolvePromise {\n  (reason?: Cancel): void\n}\n\n/**\n * 外部实例化 CancelToken 得到 cancelToken\n * 此时 cancelToken.promise 处于 pending 状态\n * 一旦调用 cancelToken.promise.then\n */\nexport default class CancelToken {\n  promise: Promise<Cancel>\n  reason?: Cancel\n\n  constructor(executor: CancelExecutor) {\n    let resolvePromise: ResolvePromise\n    this.promise = new Promise<Cancel>(resolve => {\n      resolvePromise = resolve\n    })\n    executor(message => {\n      if (this.reason) return\n      this.reason = new Cancel(message)\n      resolvePromise(this.reason)\n    })\n  }\n\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason\n    }\n  }\n\n  // 实例话对象new CancelToken，给传入一个函数，这个函数其实就是实例化对象参数executor的，再让回调，给cancel赋值一个函数\n  // message => {\n  //   if (this.reason) return\n  //   this.reason = new Cancel(message)\n  //   resolvePromise(this.reason)\n  // })\n  // 只要调用了这个函数，就可以把把 cancelToken.promise.then  进行下去，否则就是在等待。\n  static source(): CancelTokenSource {\n    let cancel!: Canceler\n    const token = new CancelToken(c => {\n      cancel = c\n    })\n    return { cancel, token }\n  }\n}\n","import { AxiosRequestConfig, AxiosStatic } from \"./types\";\r\nimport Axios from \"./core/Axios\";\r\nimport { extend } from \"./helpers/util\";\r\nimport defaults from \"./defaults\";\r\nimport mergeConfig from \"./core/mergeConfig\";\r\nimport CancelToken from \"./cancel/CancelToken\";\r\nimport Cancel, { isCancel } from \"./cancel/Cancel\";\r\n\r\nfunction createInstance(config: AxiosRequestConfig): AxiosStatic {\r\n  const context = new Axios(config)\r\n  const instance = Axios.prototype.request.bind(context)\r\n\r\n  extend(instance, context)\r\n\r\n  return instance as AxiosStatic\r\n}\r\n\r\nconst axios = createInstance(defaults)\r\n\r\naxios.create = function create(config) {\r\n  return createInstance(mergeConfig(defaults, config))\r\n}\r\n\r\naxios.CancelToken = CancelToken\r\naxios.Cancel = Cancel\r\naxios.isCancel = isCancel\r\naxios.all = (promises) => Promise.all(promises)\r\naxios.spread = (callback) => (arr) => callback.apply(null, arr)\r\n\r\n// axios.all = function all(promises) {\r\n//   return Promise.all(promises)\r\n// }\r\n// axios.spread = function spread(callback) {\r\n//   return function wrap(arr) {\r\n//     return callback.apply(null, arr)\r\n//   }\r\n// }\r\n\r\n\r\n\r\n\r\naxios.Axios = Axios\r\n\r\nexport default axios\r\n"],"names":["processHeaders"],"mappings":"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"}